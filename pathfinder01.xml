<?xml version="1.0" encoding="UTF-8"?>
<RuleSet name="pf" title="Pathfinder" description="Pathfinder Roleplaying Game">
	<Formulae>
		<Formula name="convert_modifier_to_string" type="Str">
			<If inType="Int" outType="Str">
				<Compare fromId="this" attribute="modifier" />
				<GreaterThan value="-1" />
				<Then fromId="this" attribute="modifier" prepend="+" />
				<Else fromId="this" attribute="modifier" />
			</If>
		</Formula>
		<Formula name="convert_value_to_string" type="Str">
			<If inType="Int" outType="Str">
				<Compare fromId="this" attribute="value" />
				<GreaterThan value="-1" />
				<Then fromId="this" attribute="value" prepend="+" />
				<Else fromId="this" attribute="value" />
			</If>
		</Formula>
	</Formulae>
	<Data>
		<Group id="ability_scores" userEditable="true" type="Int" startingValue="0" minValue="0" maxValue="99">
			<Datum id="STR" title="Strength" startingValue="20" />
			<Datum id="DEX" title="Dexterity" />
			<Datum id="CON" title="Constitution" />
			<Datum id="INT" title="Intelligence" />
			<Datum id="WIS" title="Wisdom" />
			<Datum id="CHA" title="Charisma" />
			<Attribute name="modifier" userEditable="false" minValue="-99">
				<Math>
					<Add fromId="this" />
					<Add value="-10" />
					<Divide value="2" />
					<Floor />
				</Math>
			</Attribute>
			<Attribute name="modifier_text" type="Str" userEditable="false" formula="convert_modifier_to_string" />
		</Group>
		<Group id="skills" userEditable="true" type="Int" startingValue="0" minValue="0">
			<Attribute name="maxValue" getFromId="Level" attribute="modifier" />
			<Group id="strength_skill">
				<Attribute name="score_mod" minValue="-99">
					<Get fromId="STR" attribute="modifier" />
				</Attribute>
			</Group>
			<Group id="dexterity_skill">
				<Attribute name="score_mod" minValue="-99">
					<Get fromId="DEX" attribute="modifier" />
				</Attribute>
			</Group>
			<Group id="intelligence_skill">
				<Attribute name="score_mod" minValue="-99">
					<Get fromId="INT" attribute="modifier" />
				</Attribute>
			</Group>
			<Group id="wisdom_skill">
				<Attribute name="score_mod" minValue="-99">
					<Get fromId="WIS" attribute="modifier" />
				</Attribute>
			</Group>
			<Group id="charisma_skill">
				<MultiDatum id="perform_skills" idPre="SkillPerform" titlePre="Perform (" titlePost=")" />
				<Attribute name="score_mod" minValue="-99">
					<Get fromId="CHA" attribute="modifier" />
				</Attribute>
			</Group>
			<Attribute name="modifier" minValue="-99">
				<Math>
					<Add fromId="this" attribute="value" />
					<Add fromId="this" attribute="score_mod" />
				</Math>
			</Attribute>
			<Attribute name="modifier_text" type="Str" userEditable="false" formula="convert_modifier_to_string" />
		</Group>
		<Datum id="Level" title="Level" startingValue="1" minValue="1" />
		<Datum id="Init" title="Initiative" startingValue="8" minValue="-99">
			<Attribute name="modifier_text" formula="convert_value_to_string" />
		</Datum>
		<Group id="saving_throws" type="Int" minValue="-99" maxValue="99" startingValue="0">
			<Datum id="FortSave" title="Fortitude">
				<Attribute name="startingValue">
					<Get fromId="CON" attribute="modifier" />
				</Attribute>
			</Datum>
			<Datum id="ReflSave" title="Reflex">
				<Attribute name="startingValue">
					<Get fromId="DEX" attribute="modifier" />
				</Attribute>
			</Datum>
			<Datum id="WillSave" title="Will">
				<Attribute name="startingValue">
					<Get fromId="WIS" attribute="modifier" />
				</Attribute>
			</Datum>
			<Attribute name="modifier_text" type="Str" formula="convert_value_to_string" />
		</Group>
		<Datum id="SkillPoints" type="Int" title="Skill Points" minValue="0" />
		<Datum id="BAB" type="Int" title="Base Attack Bonus">
			<Attribute name="full_attack_text">
				<While inType="Int" outType="Str">
					<Until operation="AND">
						<GreaterThan value="5" />
					</Until>
					<Input fromID="this" attribute="value" />
					<Output fromID="this" attribute="modifier_text" />
					<ModifyInput add="-5" />
					<ModifyOutput add="/+" useInput="add" />
				</While>
			</Attribute>
			<Attribute name="modifier_text" type="Str" formula="convert_value_to_string" />
		</Datum>
	</Data>
	<displayModules>
		<module title="Ability Scores">
			<activate>
				<start>1</start>
			</activate>
			<Description>Your ability scores modify most of your die rolls.</Description>
			<html>
			</html>
		</module>
	</displayModules>
	<favoredClassBonuses>
		<any>
			<Description>+1 hp</Description>
			<bonus>
				<pool>hp</pool>
				<amount>1</amount>
			</bonus>
		</any>
		<any>
			<Description>+1 skill point</Description>
			<bonus>
				<pool>skillPoints</pool>
				<amount>1</amount>
			</bonus>
		</any>
	</favoredClassBonuses>
	<formulae>
		<formula Name="halfLevel">
			<start>0</start>
			<operations>
				<Add Pool="level" />
				<Divide Number="2" />
				<Floor />
			</operations>
			<min>1</min>
			<text>half your level</text>
			<display><Value /></display>
		</formula>
	</formulae>
	<backgroundModules>
		<module title="Level">
			<pool></pool>
		</module>
	</backgroundModules>
</RuleSet>
